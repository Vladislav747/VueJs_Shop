(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)i=o[d],s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=a("bc3a"),r=a.n(s),i=a("ecee"),o=a("c074"),c=a("ad3d"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("top-navigation",{attrs:{search:t.searchText},on:{search:t.updateSearch}}),a("router-view",{attrs:{search:t.searchText}})],1)},l=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("router-link",{attrs:{id:"task-list",to:{name:"task-list"}}},[t._v("Список Задач")]),a("router-link",{attrs:{id:"task-add",to:{name:"task-add"}}},[t._v("Создать Новую задачу\n        "),a("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1),a("div",{staticClass:"spacer"}),t.isHome?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"Искать Задачи..."},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.emitSearch]}}):t._e()],1)},p=[],f={name:"TopNavigation",computed:{isHome:function(){return"/"===this.$route.path}}},h=f,k=(a("66d1"),a("2877")),v=Object(k["a"])(h,d,p,!1,null,"61b14d07",null),m=v.exports,g={name:"App",components:{TopNavigation:m},data:function(){return{searchText:""}},methods:{updateSearch:function(t){this.searchText=t}}},b=g,T=(a("5c0bb"),Object(k["a"])(b,u,l,!1,null,null,null)),_=T.exports,y=a("8c4f"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading||t.noTasks?t._e():a("div",{attrs:{id:"filter"}},[t._v("\n    Фильтр по категориям:\n    "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterCategory,expression:"filterCategory"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.filterCategory=e.target.multiple?a:a[0]}}},[a("option"),t._l(t.taskTypes,function(e){return a("option",{key:e},[t._v(t._s(e))])})],2)]),t.isLoading||t.noTasks?t._e():a("div",{attrs:{id:"filter"}},[t._v("\n    Фильтр по срочности:\n    "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterDateDeadline,expression:"filterDateDeadline"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.filterDateDeadline=e.target.multiple?a:a[0]}}},[a("option"),t._l(t.deadlineTypes,function(e){return a("option",{key:e},[t._v(t._s(e))])})],2)]),t.isLoading?a("div",{staticClass:"loading"},[t._v("Загружаю задачи")]):t._e(),t.noTasks?a("div",{staticClass:"no-tasks"},[a("h3",[t._v("Задачи не найдены")]),t._v("Нажмите вверху на панели Добавить Новую задачу \n  ")]):t._e(),a("div",{attrs:{id:"tasks"}},t._l(t.filteredTasks,function(t){return a("task-card",{key:t.id,attrs:{task:t}})}),1)])},w=[],$=(a("6b54"),a("96cf"),a("3b8d")),D=a("7329"),C=a.n(D),O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";new C.a({text:t,type:e,timeout:3e3,layout:"topCenter"}).show()},j=["В работе","Завершено","Сделать"],E=["Просроченные Задачи","Непросроченные Задачи"],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"card",on:{click:function(e){return t.viewTask(t.task.id)}}},[a("header",[t._v("\n    Имя: "+t._s(t.task.name)+"\n    "),a("span",[t._v(t._s(t.task.category))])]),a("div",{staticClass:"description"},[t._v(" Описание: "+t._s(t.task.description))]),t._v("\n\n Тэги: "),a("input-tag",{attrs:{id:"task-tag","read-only":!0},model:{value:t.task.tag,callback:function(e){t.$set(t.task,"tag",e)},expression:"task.tag"}}),a("div",{staticClass:"datetimeDeadline"},[t._v("Дата Дедлайна: "+t._s(t.task.dateOfTask))])],1)},L=[],P=a("74bf"),S=a.n(P),q={name:"TaskCard",components:{InputTag:S.a},props:{task:{type:Object,default:function(){return{name:"",category:"",description:""}}}},methods:{viewTask:function(t){this.$router.push({name:"view-task",params:{id:t}})}}},M=q,N=(a("d298"),Object(k["a"])(M,R,L,!1,null,"1da06b56",null)),A=N.exports,F={name:"TaskList",components:{TaskCard:A},data:function(){return{isLoading:!0,tasks:[],filteredTasks:[],filterCategory:"",filterDateDeadline:"",taskTypes:j,deadlineTypes:E,filteredTasksTime:[],filteredTasksDeadline:[]}},computed:{noTasks:function(){return!1===this.isLoading&&this.tasks&&0===this.tasks.length}},watch:{filterCategory:function(){0===this.filteredTasksDeadline.length?this.filteredTasksTime=this.tasks.filter(this.filterTask):this.filteredTasksTime=this.filteredTasksDeadline.filter(this.filterTask),this.filteredTasks=this.filteredTasksTime},filterDateDeadline:function(){0===this.filteredTasksTime.length?this.filteredTasksDeadline=this.tasks.filter(this.filterTaskDeadline):this.filteredTasksDeadline=this.filteredTasksTime.filter(this.filterTaskDeadline),this.filteredTasks=this.filteredTasksDeadline}},mounted:function(){this.getTasks()},methods:{getTasks:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("tasks");case 3:e=t.sent,this.tasks=e.data,this.filteredTasks=this.tasks.slice(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),O("Ошибка вывода списка задач  "+t.t0);case 11:this.isLoading=!1;case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}(),filterTask:function(t){return""===this.filterCategory||t.category.toString()===this.filterCategory.toString()},filterTaskDeadline:function(t){var e=new Date(t.dateOfTask).getTime(),a=(new Date).getTime();switch(this.filterDateDeadline){case"Непросроченные Задачи":return e>=a;case"Просроченные Задачи":return e<a;default:return!0}}},addTask:function(){this.$router.push("task-add")}},U=F,Y=(a("c198"),Object(k["a"])(U,x,w,!1,null,"3554dcd2",null)),I=Y.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.task?a("form",[t.isEdit?a("h2",[t._v("\n    Редактировать задачу\n    "),a("span",{staticClass:"required"},[t._v("= обязательное поле")])]):a("h2",[t._v("\n    Создать задачу\n    "),a("span",{staticClass:"required"},[t._v("= обязательное поле")])]),a("div",{staticClass:"row"},[a("label",{staticClass:"short-label"},[t._v("\n      Имя:\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.name,expression:"task.name"}],attrs:{id:"task-name",type:"text",required:""},domProps:{value:t.task.name},on:{input:function(e){e.target.composing||t.$set(t.task,"name",e.target.value)}}})]),a("label",{staticClass:"short-label"},[t._v("\n      Категория:\n      "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.task.category,expression:"task.category"}],attrs:{id:"task-category",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.task,"category",e.target.multiple?a:a[0])}}},t._l(t.taskTypes,function(e){return a("option",{key:e},[t._v(t._s(e))])}),0)])]),a("div",{staticClass:"row"},[a("label",[t._v("\n      Описание:\n      "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],attrs:{id:"task-description"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("label",[t._v("Тэги:\n      "),a("input-tag",{attrs:{id:"task-tag"},model:{value:t.task.tag,callback:function(e){t.$set(t.task,"tag",e)},expression:"task.tag"}})],1)]),a("div",{staticClass:"row"},[a("label",[t._v("Дата Дедлайна:\n      "),a("date-picker",{attrs:{type:"datetime",lang:"en",format:"YYYY-MM-DD hh:mm:ss"},model:{value:t.task.dateOfTask,callback:function(e){t.$set(t.task,"dateOfTask",e)},expression:"task.dateOfTask"}})],1)]),a("div",[a("button",{attrs:{id:"save",type:"submit"},on:{click:function(e){return e.preventDefault(),t.validateForm(!0)}}},[t._v("Сохранить Задачу")]),a("button",{attrs:{id:"save-new"},on:{click:function(e){return e.preventDefault(),t.validateForm(!1)}}},[t._v("Сохранить и Начать Новую Задачу")]),a("button",{attrs:{id:"cancel"},on:{click:function(e){return e.preventDefault(),t.cancel()}}},[t._v("Отмена")])])]):t._e()},J=[],Z=(a("a481"),a("ac6a"),a("7f7f"),a("ea76")),z=a.n(Z),B=a("b5ae"),G={name:"TaskAddEdit",components:{DatePicker:z.a,InputTag:S.a},data:function(){return{task:{name:"",category:"В работе",description:""},taskTypes:j}},validations:{task:{name:{required:B["required"]},description:{required:B["required"],max:Object(B["maxLength"])(2048)}}},computed:{isEdit:function(){return this.$route.params&&this.$route.params.id}},mounted:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isEdit){t.next=3;break}return t.next=3,this.getTask();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{getTask:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("tasks/"+this.$route.params.id);case 3:if(e=t.sent,null!==e.data){t.next=8;break}return this.$router.push({name:"task-list"}),O("Задача не Найдена."),t.abrupt("return");case 8:this.task=e.data,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),O(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),saveTask:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isEdit){t.next=7;break}return t.next=4,this.$http.put("tasks",this.task);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,this.$http.post("tasks",this.task);case 9:t.t0=t.sent;case 10:if(a=t.t0,!this.checkErrors(a)||!e){t.next=15;break}return this.$router.push({path:this.isEdit?"/task/"+this.task.id:"/"}),O("Task ".concat(a.data.name," ")+(this.isEdit?"Отредактировано":"Добавлено"),"success"),t.abrupt("return");case 15:t.next=21;break;case 17:return t.prev=17,t.t1=t["catch"](0),O("Ошибка с добавлением задачи. Попробуйте еще раз!"),t.abrupt("return");case 21:this.resetForm();case 22:case"end":return t.stop()}},t,this,[[0,17]])}));function e(e){return t.apply(this,arguments)}return e}(),resetForm:function(){this.task={name:"",category:"В работе",description:"",tag:"",dateOfTask:""}},cancel:function(){this.$router.go(-1)},checkErrors:function(t){var e=this;return"success"===t.data.message||(t.data.errors.forEach(function(t){return O(e.transformErrorMessage(t.message))}),!1)},transformErrorMessage:function(t){return t=t.replace("."," "),t=t.replace(/([A-Z])/,function(t,e){return" "+e.toLowerCase()}),t=t.charAt(0).toUpperCase()+t.slice(1)+".",t},validateForm:function(t){this.$v.task.$touch(),this.$v.task.$error?(this.$v.task.name.$error&&O("Имя должно быть заполнено"),this.$v.task.description.$error&&O("Описание должно быть заполнено - не может быть более 2048 символов"),O("Форма не может быть отправлена - ошибки в форме")):this.saveTask(t)}}},K=G,Q=(a("af67"),Object(k["a"])(K,H,J,!1,null,"03e6c51c",null)),V=Q.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"task"},[a("h3",[t._v("\n      Имя: "+t._s(t.task.name)+"\n      "),a("span",[t._v(t._s(t.task.category))])]),a("div",{staticClass:"description"},[t._v("Описание: "+t._s(t.task.description))]),a("div",{staticClass:"tag"},[t._v("Тэги:\n      "),a("input-tag",{attrs:{id:"task-tag","read-only":!0},model:{value:t.task.tag,callback:function(e){t.$set(t.task,"tag",e)},expression:"task.tag"}})],1),a("div",{staticClass:"datetimeDeadline"},[t._v("Дата Дедлайна: "+t._s(t.task.dateOfTask))])]),a("footer",[a("a",{attrs:{id:"edit"},on:{click:function(e){return e.preventDefault(),t.editTask()}}},[t._v("Редактировать")]),a("a",{attrs:{id:"delete"},on:{click:function(e){return e.preventDefault(),t.deleteTask()}}},[t._v("Удалить")])])])},X=[],tt={name:"TaskDetail",components:{InputTag:S.a},data:function(){return{task:{name:"Ошибка отображения Задачи",category:"",description:""},check:void 0}},mounted:function(){this.getTask()},methods:{getTask:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.get("tasks/"+this.$route.params.id);case 3:if(e=t.sent,null!==e.data){t.next=8;break}return this.$router.push({name:"task-list"}),O("Requested task not found."),t.abrupt("return");case 8:this.task=e.data,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),O("TaskDetail "+t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),editTask:function(){this.$router.push({name:"task-edit",params:{id:this.task.id}})},deleteTask:function(){var t=this;this.check=new C.a({text:"Удаление задачи нельзя будет отменить.<br>Вы уверены?",type:"alert",layout:"topCenter",buttons:[C.a.button("Да","danger",function(){return t.realDelete()},{id:"delete-yes"}),C.a.button("Нет","",function(){return t.closeCheck()},{id:"delete-no"})]}),this.check.show()},closeCheck:function(){this.check&&this.check.close()},realDelete:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.delete("tasks/"+this.task.id);case 3:this.check.close(),this.$router.push({name:"task-list"}),O("Задача Удалена.","success"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.check.close(),O(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}()}},et=tt,at=(a("b373"),Object(k["a"])(et,W,X,!1,null,"0182110c",null)),nt=at.exports;n["a"].use(y["a"]);var st=new y["a"]({mode:"history",routes:[{path:"/",name:"task-list",component:I},{path:"/task/:id",name:"view-task",component:nt},{path:"/task-add",name:"task-add",component:V},{path:"/task-edit/:id",name:"task-edit",component:V}]}),rt=a("1dce"),it=a.n(rt);n["a"].use(it.a),i["c"].add(o["a"]),n["a"].component("font-awesome-icon",c["a"]),n["a"].config.productionTip=!1;var ot=a("bfa7"),ct=r.a.create({baseURL:ot.baseURL});Object.defineProperty(n["a"].prototype,"$http",{get:function(){return ct}}),new n["a"]({el:"#app",router:st,render:function(t){return t(_)}})},"5c0b":function(t,e,a){},"5c0bb":function(t,e,a){"use strict";var n=a("5e27"),s=a.n(n);s.a},"5e27":function(t,e,a){},"66d1":function(t,e,a){"use strict";var n=a("a691"),s=a.n(n);s.a},a691:function(t,e,a){},ac6d:function(t,e,a){},af67:function(t,e,a){"use strict";var n=a("5c0b"),s=a.n(n);s.a},b373:function(t,e,a){"use strict";var n=a("de50"),s=a.n(n);s.a},bfa7:function(t,e){t.exports={baseURL:"http://localhost:8081/"}},c198:function(t,e,a){"use strict";var n=a("ac6d"),s=a.n(n);s.a},d298:function(t,e,a){"use strict";var n=a("f1e8"),s=a.n(n);s.a},de50:function(t,e,a){},f1e8:function(t,e,a){}});
//# sourceMappingURL=app.48a571b3.js.map